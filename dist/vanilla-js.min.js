Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){b=(this.document||this.ownerDocument).querySelectorAll(b);for(var d=b.length;0<=--d&&b.item(d)!==this;);return-1<d});
Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(b,d){if(void 0===b||null===b)throw new TypeError("Cannot convert first argument to object");for(var a=Object(b),c=1;c<arguments.length;c++){var e=arguments[c];if(!(void 0===e||null===e))for(var e=Object(e),g=Object.keys(Object(e)),f=0,l=g.length;f<l;f++){var h=g[f],k=Object.getOwnPropertyDescriptor(e,h);void 0!==k&&k.enumerable&&(a[h]=e[h])}}return a}});
Array.prototype.forEach||(Array.prototype.forEach=function(b,d){d=d||window;for(var a=0;a<this.length;a++)b.call(d,this[a],a,this)});window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(b,d){d=d||window;for(var a=0;a<this.length;a++)b.call(d,this[a],a,this)});var hasClassList="classList"in document.createElement("p");function onPageReady(b){"loading"!==document.readyState?b():document.addEventListener("DOMContentLoaded",b)}function onPageLoad(b){"complete"===document.readyState?b():window.addEventListener("load",b)}var $=document.querySelector.bind(document),$all=document.querySelectorAll.bind(document),$forEach=function(b,d,a){for(var c=0;c<b.length;c++)d.call(a,b[c],c)};NodeList.prototype.first=function(){return this.item(0)};
function $find(b,d){return b.querySelectorAll(d)}function $prepend(b){document.head.insertAdjacentHTML("afterbegin",b)}function $append(b){document.body.insertAdjacentHTML("beforeend",b)}function $disableScreenScrolling(){document.body.style.touchAction="none";$addClass(document.body,"bp-disable-scroll")}function $restoreScreenScrolling(){document.body.style.touchAction="";$removeClass(document.body,"bp-disable-scroll")}function $addClass(b,d){hasClassList?b.classList.add(d):b.className+=" "+d}
function $removeClass(b,d){b?hasClassList?b.classList.remove(d):b.className=b.className.replace(RegExp("(^|\\b)"+d.split(" ").join("|")+"(\\b|$)","gi")," "):console.warn("$removeClass with an invalid element",b)}function $hasClass(b,d){return hasClassList?b.classList.contains(d):RegExp("(^| )"+d+"( |$)","gi").test(b.className)}function $toggleClass(b,d){if(b.classList)b.classList.toggle(d);else{var a=b.className.split(" "),c=a.indexOf(d);0<=c?a.splice(c,1):a.push(d);b.className=a.join(" ")}}
function $hide(b){b.style.display="none"}function $show(b,d){b.style.display=d?d:""}
function $detectSwipe(b,d,a){var c=0,e=0,g=0,f=0;a||(a=50);b.addEventListener("touchstart",function(a){c=a.changedTouches[0].screenX;e=a.changedTouches[0].screenY},{passive:!0});b.addEventListener("touchend",function(b){g=b.changedTouches[0].screenX;f=b.changedTouches[0].screenY;var h=g-c,k=f-e;if(Math.abs(h)>Math.abs(k)){if(Math.abs(h)>a)return 0>h?d("left",b):d("right",b)}else if(Math.abs(k)>a)return 0<k?d("down",b):d("up",b)})}
function $triggerEvent(b,d){var a=document.createEvent("Event");a.initEvent(d,!0,!0);("string"===typeof b||b instanceof String?$(b):b).dispatchEvent(a)}function $on(b,d,a){$all(b).forEach(function(c){c.addEventListener(d,function(e){a(e,c)},!1)})}Array.prototype.unique=function(){var b={};return this.filter(function(d){return b.hasOwnProperty(d)?!1:b[d]=!0})};var lightboxInstanceCount=0;
function $lightbox(b,d){var a={initialized:!1,modalId:null,modal:null,modalImage1:null,modalImage2:null,modalCaption:null,modalNext:null,modalPrev:null,images:[],currentIndex:0,singleMode:!1,isOpen:!1,insertCss:function(){$("#lightbox-inline-css")||$prepend('<style id="lightbox-inline-css">.lightbox-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:2;pointer-events:none;opacity:0;transform:scale(0);transition:opacity .4s ease-in-out, transform .3s ease-in-out;}.lightbox-modal.open{pointer-events:auto;display:block;opacity:1;transform:scale(1);}.lightbox-modal img{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100vh;object-fit:contain;opacity:0;transition:all .4s ease-in-out}.lightbox-close{position:absolute;top:10px;right:10px;font-size:3rem;cursor:pointer;}.lightbox-next,.lightbox-prev{position:absolute;top:calc(50% - 50px);font-size:6rem;line-height:100px;cursor:pointer;}.lightbox-modal.singleMode .lightbox-next,.lightbox-modal.singleMode .lightbox-prev{display:none}.lightbox-next{right:10px;}.lightbox-prev{left:10px;}</style>')},insertModal:function(){lightboxInstanceCount++;
a.modalId="lightbox-modal-"+lightboxInstanceCount;$append('<div id="'+a.modalId+'" class="lightbox-modal">\n<figure><img alt=""><img alt=""><figcaption/></figure>\n<div class="lightbox-close">&times;</div>\n<div class="lightbox-next">&rsaquo;</div>\n<div class="lightbox-prev">&lsaquo;</div>\n</div>')},checkModal:function(){a.insertModal();a.modal=$("#"+a.modalId);var c=$find(a.modal,"img");a.modalImage1=c[0];a.modalImage2=c[1];a.modalCaption=$find(a.modal,"figcaption").first();c=$find(a.modal,".lightbox-close").first();
a.modalNext=$find(a.modal,".lightbox-next").first();a.modalPrev=$find(a.modal,".lightbox-prev").first();$detectSwipe(a.modal,function(e){a.isOpen&&("left"===e?a.next():"right"===e?a.prev():a.hide())});window.addEventListener("keydown",function(e){if(a.isOpen){var c=e.key;"ArrowRight"===c?(e.preventDefault(),e.stopImmediatePropagation(),a.next()):"ArrowLeft"===c?(e.preventDefault(),e.stopImmediatePropagation(),a.prev()):"Escape"===c?(e.preventDefault(),e.stopImmediatePropagation(),a.hide()):" "===
c?(e.preventDefault(),e.stopImmediatePropagation(),a.next()):"s"===c&&!0===e.ctrlKey&&(e.preventDefault(),e.stopImmediatePropagation(),a.next())}});c.addEventListener("click",function(c){c.preventDefault();c.stopImmediatePropagation();a.hide()});a.modalImage1.addEventListener("click",function(c){c.preventDefault();c.stopImmediatePropagation();a.next()});a.modalImage2.addEventListener("click",function(c){c.preventDefault();c.stopImmediatePropagation();a.next()});a.modalImage1.addEventListener("load",
function(){a.modalImage1.style.opacity="1";a.modalImage2.style.opacity="0"});a.modalImage2.addEventListener("load",function(){a.modalImage2.style.opacity="1";a.modalImage1.style.opacity="0"});a.modalNext.addEventListener("click",function(c){c.preventDefault();c.stopImmediatePropagation();a.next()});a.modalPrev.addEventListener("click",function(c){c.preventDefault();c.stopImmediatePropagation();a.prev()})},scanElement:function(c){var b=c.getAttribute("data-src")||c.getAttribute("href")||c.getAttribute("src");
if(b){var d=c.getAttribute("data-title")||c.getAttribute("title")||c.getAttribute("alt");if(!d){var f=$find(c,"img").first();f&&(d=f.getAttribute("data-title")||f.getAttribute("title")||f.getAttribute("alt"));if(!d)if(f=$find(c,"figcaption").first())d=f.innerText;else if((f=c.nextSibling)&&f.matches("figcaption"))d=f.innerText}a.images.push([b,d])}else console.warn("$lightbox: element has no valid image url",c)},checkImages:function(){$all(b).forEach(function(c){d?$find(c,d).forEach(function(c){a.scanElement(c)}):
a.scanElement(c)});1===a.images.length&&(a.singleMode=!0,$addClass(a.modal,"singleMode"))},bootstrap:function(){a.initialized||(a.checkModal(),a.checkImages(),a.initialized=!0)},switchImage:function(c){a.currentIndex=c;var b=null,d=null;0===a.currentIndex%2?(b=a.modalImage1,d=a.modalImage2):(b=a.modalImage2,d=a.modalImage1);d.setAttribute("title","");a.modalCaption.innerText="";b.src=a.images[c][0];if(c=a.images[c][1])b.setAttribute("title",c),a.modalCaption.innerText=c},show:function(c){a.hide();
a.switchImage(c);a.isOpen=!0;$disableScreenScrolling();setTimeout(function(){$addClass(a.modal,"open")},0);a.preloadImages()},preloadImages:function(){a.images.map(function(a){return a[0]}).unique().slice(1).forEach(function(a){(new Image).src=a})},hide:function(){a.isOpen=!1;$removeClass(a.modal,"open");$restoreScreenScrolling();a.modalImage1.style.opacity="0";a.modalImage2.style.opacity="0"},next:function(){if(!a.singleMode){var c=a.currentIndex+1;if(c<a.images.length)return a.switchImage(c)}a.hide()},
prev:function(){if(!a.singleMode){var c=a.currentIndex-1;if(0<=c)return a.switchImage(c)}a.hide()},detectUrl:function(c){c=c.getAttribute("data-src")||c.getAttribute("href")||c.getAttribute("src");for(var b=0;b<a.images.length;b++)if(a.images[b][0]===c)return b;return!1}};a.insertCss();$on(b,"click",function(c){a.bootstrap();if(0===a.images.length)console.warn("$lightbox: no images found");else{for(var d=c.target,g=a.detectUrl(d);!1===g;){if(d.matches(b)){console.warn("$lightbox: clicked element url not found in main selector");
return}d=d.parentNode;if("function"!==typeof d.getAttribute){console.error("$lightbox: cannot find the clicked element in document");return}g=a.detectUrl(d)}c.preventDefault();c.stopImmediatePropagation();return a.show(g)}});return{}};function $lazyload(b,d){var a={};if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))console.warn("$lazyload: not supported.");else return a.images=[],a.options={autoLoad:!1,cancelInitialLoad:!1},a.options=Object.assign(a.options,d),a.preloadImage=function(a){var b=a.getAttribute("data-src");if(b&&(a.removeAttribute("data-src"),$addClass(a,"lazyloading"),a.onload=function(){$addClass(a,"lazyloaded");$removeClass(a,
"lazyloading")},a.setAttribute("src",b),b=a.getAttribute("data-srcset")))a.removeAttribute("data-srcset"),a.setAttribute("srcset",b)},onPageReady(function(){if("IntersectionObserver"in window){var c=new IntersectionObserver(function(c,b){c.forEach(function(c){c.isIntersecting&&(a.preloadImage(c.target),b.unobserve(c.target))})},{rootMargin:"400px",threshold:0});a.images=[];$all(b).forEach(function(b){if(a.options.cancelInitialLoad){var d=b.getAttribute("src");d&&(b.removeAttribute("src"),b.setAttribute("data-src",
d))}b.hasAttribute("data-src")&&(b.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",$addClass(b,"lazyloading"),d=b.getAttribute("srcset"),b.removeAttribute("srcset"),d&&b.setAttribute("data-srcset",d),c.observe(b),a.images.push(b))});a.options.autoLoad&&onPageLoad(function(){a.images.forEach(function(b,c){setTimeout(function(){a.preloadImage(b)},1E3*(c+2))})})}else console.warn("[onPageReady] $lazyload: not supported.")}),{}}
"IntersectionObserver"in window&&("IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&!("isIntersecting"in IntersectionObserverEntry.prototype))&&Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});function $copyright(b){var d;d=b||"This material is copyright by the author - All Right Reserved";document.body.addEventListener("contextmenu",function(a){console.warn(d);a.preventDefault();return!1},!1);document.body.addEventListener("copy",function(a){console.warn(d);a.preventDefault();a.clipboardData.setData("text/plain",d);return!1},!1);document.body.addEventListener("dragstart",function(a){console.warn(d);a.preventDefault();return!1},!1)};function $inViewport(b,d){var a=b.getBoundingClientRect();return 0<=a.top&&a.top+d<=(window.innerHeight||document.documentElement.clientHeight)}function $windowScrollTop(){return window.scrollY||document.body.scrollTop||document.documentElement.scrollTop}
function $visibility(b,d,a){var c={};c.options=Object.assign({invisibleClass:"invisible",visibleClass:"animated",easing:null},d);c.refreshList=function(){var b=c.options.easing?c.options.easing:0.05*(window.innerHeight||document.documentElement.clientHeight);$forEach(c.nodeList,function(d){$inViewport(d,b)?d.hasAttribute("data-visibile")||(d.setAttribute("data-visibile",!0),c.options.invisibleClass&&$removeClass(d,c.options.invisibleClass),c.options.visibleClass&&$addClass(d,c.options.visibleClass),
a&&a(d,!0)):d.hasAttribute("data-visibile")&&(d.removeAttribute("data-visibile"),c.options.visibleClass&&$removeClass(d,c.options.visibleClass),c.options.invisibleClass&&$addClass(d,c.options.invisibleClass),a&&a(d,!1))})};c.nodeList=Array.prototype.slice.call($all(b));c.refreshList();0<c.nodeList.length?document.addEventListener("scroll",c.refreshList):console.warn("$visibility: no hidden elements");return{}};function $scrollDetector(b){function d(a){c!==a&&(c=a,$triggerEvent(window.document,"scroll-"+a))}var a=window.pageYOffset,c="";b=b?b:100;document.addEventListener("scroll",function(c){c=window.pageYOffset;if(Math.abs(c-a)>b){var g=c>a?"down":"up";a=c;return d(g)}if(0===c)return a=c,d("top");if(window.pageYOffset+window.innerHeight+b>(void 0!==document.height?document.height:document.body.offsetHeight))return a=c,d("bottom")})};
