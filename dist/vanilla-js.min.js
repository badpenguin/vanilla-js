var hasClassList="classList"in document.createElement("p");hasClassList||console.error("[polyfill] no classList support",navigator.userAgent);Array.prototype.forEach||(console.warn("[polyfill] Array.forEach"),Array.prototype.forEach=function(a,c){c=c||window;for(var b=0;b<this.length;b++)a.call(c,this[b],b,this)});window.NodeList&&!NodeList.prototype.forEach&&(console.warn("[polyfill] NodeList.forEach"),NodeList.prototype.forEach=Array.prototype.forEach);
window.HTMLCollection&&!HTMLCollection.prototype.forEach&&(HTMLCollection.prototype.forEach=Array.prototype.forEach);Element.prototype.matches||(console.warn("[polyfill] Element.matches"),Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);
Object.assign||(console.warn("[polyfill] Object.assign"),Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(a,c){if(void 0===a||null===a)throw new TypeError("Cannot convert first argument to object");for(var b=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(!(void 0===e||null===e))for(var e=Object(e),g=Object.keys(Object(e)),f=0,n=g.length;f<n;f++){var m=g[f],k=Object.getOwnPropertyDescriptor(e,m);void 0!==k&&k.enumerable&&(b[m]=e[m])}}return b}}));
Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,c){if(null==this)throw new TypeError('"this" is null or not defined');var b=Object(this),d=b.length>>>0;if(0===d)return!1;for(var e,g,f=0|c,f=Math.max(0<=f?f:d-Math.abs(f),0);f<d;){if((e=b[f])===(g=a)||"number"==typeof e&&"number"==typeof g&&isNaN(e)&&isNaN(g))return!0;f++}return!1}});var $one=document.querySelector.bind(document),$id=document.getElementById.bind(document),$all=document.querySelectorAll.bind(document);function $find(a,c){return a.querySelectorAll(c)}NodeList.prototype.first=function(){return this.item(0)};var $forEach=function(a,c,b){for(var d=0;d<a.length;d++)c.call(b,a[d],d)},$allEach=function(a,c){var b=$all(a);if(!b)return console.warn("$allEach selector not found"),!1;$forEach(b,c)};
function $onReady(a){"loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a)}function $onLoad(a){"complete"===document.readyState?a():window.addEventListener("load",a)}
function $triggerEvent(a,c){var b;if(null===a)b=window.document;else if(a instanceof HTMLElement)b=a;else if("string"===typeof a||a instanceof String)b=$one(a);else if(a instanceof HTMLDocument)b=a;else return console.error("$triggerEvent invalid element",a,c),!1;var d=document.createEvent("HTMLEvents");d.initEvent(c,!0,!0);b.dispatchEvent(d)}
function $on(a,c,b){null===a?document.addEventListener(c,function(d){b(d,a)},!1):a instanceof HTMLElement?a.addEventListener(c,function(d){b(d,a)},!1):$allEach(a,function(a){a.addEventListener(c,function(e){b(e,a)},!1)})}function $live(a,c,b){document.addEventListener(c,function(d){d.target.matches(a)&&b(d)},!1)}
function $onSwipe(a,c,b){null===a&&(a=window.document);if(!a)return console.error("$onSwipe invalid element"),!1;var d=0,e=0,g=0,f=0;b||(b=50);a.addEventListener("touchstart",function(b){d=b.changedTouches[0].screenX;e=b.changedTouches[0].screenY},{passive:!0});a.addEventListener("touchend",function(a){g=a.changedTouches[0].screenX;f=a.changedTouches[0].screenY;var m=g-d,k=f-e;if(Math.abs(m)>Math.abs(k)){if(Math.abs(m)>b)return 0>m?c("left",a):c("right",a)}else if(Math.abs(k)>b)return 0<k?c("down",
a):c("up",a)});return!0}function $addClass(a,c){return a?(a.classList.add(c),!0):!1}function $removeClass(a,c){return a?(a.classList.remove(c),!0):!1}function $hasClass(a,c){return a?a.classList.contains(c):!1}function $toggleClass(a,c){return a?(a.classList.toggle(c),!0):!1}function $hide(a){return a?(a.style.display="none",!0):!1}function $show(a,c){return a?(a.style.display=c?c:"",!0):!1}function $empty(a){if(a)for(;a.firstChild;)a.removeChild(a.firstChild)}
function $addOption(a,c,b){var d=document.createElement("option");d.appendChild(document.createTextNode(b));d.value=c;a.appendChild(d)}function $prependHead(a){document.head.insertAdjacentHTML("afterbegin",a)}function $appendBody(a){document.body.insertAdjacentHTML("beforeend",a)}Array.prototype.unique=function(){return this.filter(function(a,c,b){return b.indexOf(a)===c})};function getObject(a,c){return c.split(".").reduce(function(b,a){return"undefined"==typeof b||null===b?b:b[a]},a)}
function isObject(a){return null!=a&&"object"==typeof a}function isFunction(a){return"function"==typeof a};var $ajax=function(a,c,b,d){var e=new XMLHttpRequest;e.open(a,c,!0);isObject(b)||(console.warn("$ajax: options is not an object"),b={});b.timeout&&(console.warn("setting timeout"),e.timeout=b.timeout);b.withCredentials&&(e.withCredentials=b.withCredentials);a=b.data||null;var g=b.debug||!1,f=b.responseType||!1;if(b.sendUrlencoded){e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");c=[];for(var n in a)a.hasOwnProperty(n)&&c.push(encodeURIComponent(n)+"="+encodeURIComponent(a[n]));
a=c.join("&").replace(/%20/g,"+")}b.sendFormData&&e.setRequestHeader("Content-Type","multipart/form-data");b.sendJson&&(e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),a=JSON.stringify(a),f||(f="json"));b.nocors||e.setRequestHeader("X-Requested-With","XMLHttpRequest");if(b.headers)for(var m in b.headers)b.headers.hasOwnProperty(m)&&e.setRequestHeader(m,b.headers[m]);b.onprogress&&(getObject(e,"upload.onprogress")?(console.warn("hook upload"),e.upload.onprogress=function(a){var d=
Math.round(100*(a.loaded/a.total));b.onprogress(d,a)}):console.warn("$ajax.js: no upload hook available"));f&&(e.responseType=f);e.onreadystatechange=function(){g&&console.debug("[$ajax] onreadystatechange",e.readyState,e.status,e.statusText)};e.onload=function(){g&&console.log("[$ajax] onload",e.status,e.statusText);var b=200<=e.status&&300>e.status,a={status:e.status,response:e.response,responseType:e.responseType};"json"===f&&"string"===typeof e.response&&(a.response=JSON.parse(e.response),a.responseType=
"json");var c=null;a.hasOwnProperty("response")&&(a.response&&a.response.hasOwnProperty("error")&&a.response.hasOwnProperty("payload"))&&(c=0===a.response.error?a.response.payload:!1);d(b,a,c)};e.onabort=function(){console.warn("[$ajax] onabort",e.status,e.statusText);d(!1,e,null)};e.onerror=function(){console.error("[$ajax] onerror",e.status,e.statusText);d(!1,e,null)};e.ontimeout=function(){console.error("[$ajax] ontimeout",e.status,e.statusText);d(!1,e,null)};b.data?e.send(a):e.send();return e};function getCookie(a){return(a=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"))?a[2]:null}function setCookie(a,c,b){var d=new Date;d.setTime(d.getTime()+864E5*b);document.cookie=a+"="+c+";path=/;expires="+d.toGMTString()}function setSessionCookie(a,c){document.cookie=a+"="+c+";path=/"}function removeCookie(a){setCookie(a,"",-1)}
function $setCookie(a,c,b,d,e,g){var f=new Date;f.setTime(f.getTime()+864E5*b);document.cookie=a+"="+c+";path="+d+";domain="+e+(g?";secure":"")+";expires="+f.toGMTString()};function $copyright(a,c){var b={};b.title=a||"This material is copyright by the author - All Right Reserved";b.notify=function(){console.warn(b.title);isFunction(c)&&c(b.title)};window.document.addEventListener("contextmenu",function(a){a.preventDefault();b.notify();return!1},!1);window.document.addEventListener("copy",function(a){a.preventDefault();a.clipboardData.setData("text/plain",b.title);b.notify();return!1},!1);window.document.addEventListener("dragstart",function(a){a.preventDefault();b.notify();
return!1},!1)};function $lazyload(a,c){"IntersectionObserver"in window&&("IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&!("isIntersecting"in IntersectionObserverEntry.prototype))&&Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});var b={};if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))console.warn("$lazyload: not supported.");
else return b.images=[],b.options={autoLoad:!1,cancelInitialLoad:!1},b.options=Object.assign(b.options,c),b.preloadImage=function(b){var a=b.getAttribute("data-src");if(a&&(b.removeAttribute("data-src"),$addClass(b,"lazyloading"),b.onload=function(){$addClass(b,"lazyloaded");$removeClass(b,"lazyloading")},b.setAttribute("src",a),a=b.getAttribute("data-srcset")))b.removeAttribute("data-srcset"),b.setAttribute("srcset",a)},$onReady(function(){if("IntersectionObserver"in window){var d=new IntersectionObserver(function(a,
d){a.forEach(function(a){a.isIntersecting&&(b.preloadImage(a.target),d.unobserve(a.target))})},{rootMargin:"400px",threshold:0});b.images=[];$all(a).forEach(function(a){if(b.options.cancelInitialLoad){var c=a.getAttribute("src");c&&(a.removeAttribute("src"),a.setAttribute("data-src",c))}a.hasAttribute("data-src")&&(a.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",$addClass(a,"lazyloading"),c=a.getAttribute("srcset"),a.removeAttribute("srcset"),c&&a.setAttribute("data-srcset",c),
d.observe(a),b.images.push(a))});b.options.autoLoad&&$onLoad(function(){b.images.forEach(function(a,d){setTimeout(function(){b.preloadImage(a)},1E3*(d+2))})})}else console.warn("[$onReady] $lazyload: not supported.")}),{}};function $disableScreenScrolling(){document.body.style.touchAction="none";$addClass(document.body,"bp-disable-scroll")}function $restoreScreenScrolling(){document.body.style.touchAction="";$removeClass(document.body,"bp-disable-scroll")}var lightboxInstanceCount=0;
function $lightbox(a,c){var b={initialized:!1,modalId:null,modal:null,modalImage1:null,modalImage2:null,modalCaption:null,modalNext:null,modalPrev:null,images:[],currentIndex:0,singleMode:!1,isOpen:!1,insertCss:function(){$one("#lightbox-inline-css")||$prependHead('<style id="lightbox-inline-css">.lightbox-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:101;pointer-events:none;opacity:0;transform:scale(0);transition:opacity .4s ease-in-out, transform .3s ease-in-out;}.lightbox-modal.lightbox-modal--open{pointer-events:auto;display:block;opacity:1;transform:scale(1);}.lightbox-modal img{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100vh;object-fit:contain;opacity:0;transition:all .4s ease-in-out}.lightbox-close{position:absolute;top:10px;right:10px;font-size:3rem;cursor:pointer;}.lightbox-next,.lightbox-prev{position:absolute;top:calc(50% - 50px);font-size:6rem;line-height:100px;cursor:pointer;}.lightbox-modal.lightbox-modal--single-mode .lightbox-next,.lightbox-modal.lightbox-modal--single-mode .lightbox-prev{display:none}.lightbox-next{right:10px;}.lightbox-prev{left:10px;}</style>')},
insertModal:function(){lightboxInstanceCount++;b.modalId="lightbox-modal-"+lightboxInstanceCount;$appendBody('<div id="'+b.modalId+'" class="lightbox-modal">\n<figure><img alt=""><img alt=""><figcaption/></figure>\n<div class="lightbox-close">&times;</div>\n<div class="lightbox-next">&rsaquo;</div>\n<div class="lightbox-prev">&lsaquo;</div>\n</div>')},checkModal:function(){b.insertModal();b.modal=$one("#"+b.modalId);var a=$find(b.modal,"img");b.modalImage1=a[0];b.modalImage2=a[1];b.modalCaption=$find(b.modal,
"figcaption").first();a=$find(b.modal,".lightbox-close").first();b.modalNext=$find(b.modal,".lightbox-next").first();b.modalPrev=$find(b.modal,".lightbox-prev").first();$onSwipe(b.modal,function(a){b.isOpen&&("left"===a?b.next():"right"===a?b.prev():b.hide())});window.addEventListener("keydown",function(a){if(b.isOpen){var d=a.key;"ArrowRight"===d?(a.preventDefault(),a.stopImmediatePropagation(),b.next()):"ArrowLeft"===d?(a.preventDefault(),a.stopImmediatePropagation(),b.prev()):"Escape"===d?(a.preventDefault(),
a.stopImmediatePropagation(),b.hide()):" "===d?(a.preventDefault(),a.stopImmediatePropagation(),b.next()):"s"===d&&!0===a.ctrlKey&&(a.preventDefault(),a.stopImmediatePropagation(),b.next())}});a.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.hide()});b.modalImage1.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.next()});b.modalImage2.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.next()});
b.modalImage1.addEventListener("load",function(){b.modalImage1.style.opacity="1";b.modalImage2.style.opacity="0"});b.modalImage2.addEventListener("load",function(){b.modalImage2.style.opacity="1";b.modalImage1.style.opacity="0"});b.modalNext.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.next()});b.modalPrev.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.prev()})},scanElement:function(a){var e=a.getAttribute("data-src")||
a.getAttribute("href")||a.getAttribute("src");if(e){var c=a.getAttribute("data-title")||a.getAttribute("title")||a.getAttribute("alt");if(!c){var f=$find(a,"img").first();f&&(c=f.getAttribute("data-title")||f.getAttribute("title")||f.getAttribute("alt"));if(!c)if(f=$find(a,"figcaption").first())c=f.innerText;else if((f=a.nextSibling)&&f.matches("figcaption"))c=f.innerText}b.images.push([e,c])}else console.warn("$lightbox: element has no valid image url",a)},checkImages:function(){$all(a).forEach(function(a){c?
$find(a,c).forEach(function(a){b.scanElement(a)}):b.scanElement(a)});1===b.images.length&&(b.singleMode=!0,$addClass(b.modal,"lightbox-modal--single-mode"))},bootstrap:function(){b.initialized||(b.checkModal(),b.checkImages(),b.initialized=!0)},switchImage:function(a){b.currentIndex=a;var c=null,g=null;0===b.currentIndex%2?(c=b.modalImage1,g=b.modalImage2):(c=b.modalImage2,g=b.modalImage1);g.setAttribute("title","");b.modalCaption.innerText="";c.src=b.images[a][0];if(a=b.images[a][1])c.setAttribute("title",
a),b.modalCaption.innerText=a},show:function(a){b.hide();b.switchImage(a);b.isOpen=!0;$disableScreenScrolling();setTimeout(function(){$addClass(b.modal,"lightbox-modal--open")},0);b.preloadImages()},preloadImages:function(){b.images.map(function(a){return a[0]}).unique().slice(1).forEach(function(a){(new Image).src=a})},hide:function(){b.isOpen=!1;$removeClass(b.modal,"lightbox-modal--open");$restoreScreenScrolling();b.modalImage1.style.opacity="0";b.modalImage2.style.opacity="0"},next:function(){if(!b.singleMode){var a=
b.currentIndex+1;if(a<b.images.length)return b.switchImage(a)}b.hide()},prev:function(){if(!b.singleMode){var a=b.currentIndex-1;if(0<=a)return b.switchImage(a)}b.hide()},detectUrl:function(a){a=a.getAttribute("data-src")||a.getAttribute("href")||a.getAttribute("src");for(var c=0;c<b.images.length;c++)if(b.images[c][0]===a)return c;return!1}};b.insertCss();$on(a,"click",function(c){b.bootstrap();if(0===b.images.length)console.warn("$lightbox: no images found");else{for(var e=c.target,g=b.detectUrl(e);!1===
g;){if(e.matches(a)){console.warn("$lightbox: clicked element url not found in main selector");return}e=e.parentNode;if("function"!==typeof e.getAttribute){console.error("$lightbox: cannot find the clicked element in document");return}g=b.detectUrl(e)}c.preventDefault();c.stopImmediatePropagation();return b.show(g)}});return{}};function $scrollDetector(a){function c(a){d!==a&&(d=a,$triggerEvent(window.document,"scroll-"+a))}var b=window.pageYOffset,d="";a=a?a:100;document.addEventListener("scroll",function(){var d=window.pageYOffset;if(Math.abs(d-b)>a){var g=d>b?"down":"up";b=d;return c(g)}if(0===d)return b=d,c("top");if(window.pageYOffset+window.innerHeight+a>(void 0!==document.height?document.height:document.body.offsetHeight))return b=d,c("bottom")})}
function $scrollOnVisible(a,c){var b=$one(a);b instanceof HTMLElement||console.error("dom_element must be a valid HTMLElement");"function"!==typeof c&&console.error("Second parameter must be a function, got",typeof c,"instead");var d=function(){var a=!1;return function(){var d;if(d=!a){d=b.getBoundingClientRect();var f=document.documentElement;d=0<=d.top&&0<=d.left&&d.bottom<=(window.innerHeight||f.clientHeight)&&d.right<=(window.innerWidth||f.clientWidth)}d&&(a=!0,c())}}();window.addEventListener("scroll",
d,!1)}
function $scrollOnPageLenght(a,c){function b(){var a=document;return Math.max(a.body.scrollHeight,a.documentElement.scrollHeight,a.body.offsetHeight,a.documentElement.offsetHeight,a.body.clientHeight,a.documentElement.clientHeight)}function d(){return window.innerHeight||(document.documentElement||document.body).clientHeight}"number"!==typeof a&&console.error("First parameter must be a number, got",typeof a,"instead");"function"!==typeof c&&console.error("Second parameter must be a function, got",typeof c,
"instead");var e=b()>d()?b()-d():0;window.addEventListener("resize",function(){e=b()>d()?b()-d():0},!1);var g=function(){var b=!1;return function(){var d;if(d=!b)d=0===e?100:100*((window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop)/e),d=d>a;d&&(b=!0,c())}}();0===b()||100*(d()/b())>=a?c():window.addEventListener("scroll",g,!1)};function $inViewport(a,c){var b=a.getBoundingClientRect();return 0<=b.top&&b.top+c<=(window.innerHeight||document.documentElement.clientHeight)}function $windowScrollTop(){return window.scrollY||document.body.scrollTop||document.documentElement.scrollTop}
function $visibility(a,c,b){var d={};d.options=Object.assign({invisibleClass:"invisible",visibleClass:"animate--start",easing:null},c);d.refreshList=function(){var a=d.options.easing?d.options.easing:0.05*(window.innerHeight||document.documentElement.clientHeight);$forEach(d.nodeList,function(c){$inViewport(c,a)?c.hasAttribute("data-visibile")||(c.setAttribute("data-visibile",!0),d.options.invisibleClass&&$removeClass(c,d.options.invisibleClass),d.options.visibleClass&&$addClass(c,d.options.visibleClass),
b&&b(c,!0)):c.hasAttribute("data-visibile")&&(c.removeAttribute("data-visibile"),d.options.visibleClass&&$removeClass(c,d.options.visibleClass),d.options.invisibleClass&&$addClass(c,d.options.invisibleClass),b&&b(c,!1))})};d.nodeList=Array.prototype.slice.call($all(a));d.refreshList();0<d.nodeList.length?document.addEventListener("scroll",d.refreshList):console.warn("$visibility: no hidden elements");return{}};function $addClasses(a,c){if(a){for(var b=c.split(" "),d=0;d<b.length;d++)a.classList.add(b[d]);return!0}return!1}
var $closest=function(a,c){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){a=(this.document||this.ownerDocument).querySelectorAll(a);for(var c=a.length;0<=--c&&a.item(c)!==this;);return-1<c});for(;a&&a!==document;a=a.parentNode)if(a.matches(c))return a;return null};
Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});function $debounce(a,c,b){b="undefined"!==typeof b?b:!1;c=c||20;var d=null;return function(){var e=this,g=arguments,f=b&&!d;clearTimeout(d);d=setTimeout(function(){d=null;b||a.apply(e,g)},c);f&&a.apply(e,g)}}
function $scrollIntoView(a,c){if(!a)return!1;c=c||100;if("scrollBehavior"in document.documentElement.style){try{a.scrollIntoView({block:"center"})}catch(b){console.warn("scrollIntoView failed",b),a.scrollIntoView(!1)}return!0}if(window.hasOwnProperty("scroll")){var d=a.getBoundingClientRect(),e=document.body,g=document.documentElement,d=d.top+(window.pageYOffset||g.scrollTop||e.scrollTop)-(g.clientTop||e.clientTop||0);d>=c&&(d-=c);window.scrollTo(0,d);return!0}console.warn("vanillaScroll cannot scroll");
return!1}function $formValues(a){for(var c={},b=0;b<a.elements.length;b++){var d=a.elements[b];d.name&&(("checkbox"===d.type||"radio"===d.type)&&!d.checked?c.hasOwnProperty(d.name)||(c[d.name]=null):c[d.name]=d.value)}return c}function $isString(a){return"string"===typeof a||a instanceof String}
function $formFieldRequired(a){if($isString(a)){if(0<a.trim().length)return!0}else if(Array.isArray(a)){if(0<a.length)return!0}else if(null!==a)throw"$formRequired: got a strange input: "+typeof a;return"Il campo \u00e8 obbligatorio"}function $formFieldLength(a,c,b){if(!$isString(b))return"Tipo di dato non valido";b=b.trim().length;return b<a?"La lunghezza minima \u00e8 di "+a+" caratteri.":b>c?"La lunghezza massimma \u00e8 di "+a+" caratteri.":!0}
function $formFieldEmail(a){return!$isString(a)?"Tipo di dato non valido":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())?!0:"Email non valida"}
function $formDecorateFieldAsNumeric(a,c){var b=$one(a);b.setAttribute("inputmode","decimal");var d=RegExp(c||"[0-9.+-]");$on(b,"keypress",function(a){if("paste"===a.type)b=(event.clipboardData||window.clipboardData).getData("text/plain");else var b=a.keyCode||a.which,b=String.fromCharCode(b);d.test(b)||(a.returnValue=!1,a.preventDefault&&a.preventDefault())})}
function $formDecorateFieldAsPhone(a,c){var b=$one(a),d=RegExp(c||"[0-9+]");$on(b,"keypress",function(a){if("paste"===a.type)b=(event.clipboardData||window.clipboardData).getData("text/plain");else var b=a.keyCode||a.which,b=String.fromCharCode(b);d.test(b)||(a.returnValue=!1,a.preventDefault&&a.preventDefault())})};var $form=function(){var a,c,b,d,e,g,f,n,m;function k(a,b){E&&("undefined"!==typeof b?console.debug(a,b):console.debug(a))}function r(a){a.forEach(function(a){k("! disable",a.name||a.id||a.className||a.type);a.setAttribute("disabled","disabled")})}function t(a){a.forEach(function(a){k("enable",a);a.removeAttribute("disabled")})}function l(y,l){if(!this)throw'$form: You forgot to use "new" to create the object';if(!y)throw"$form: You did not provide an element";h=$one(y);if(!h)throw"$form: element not found for: "+
y;l=l||{};a=l.action||!1;c=l.validClass||"is-valid";b=l.validClass||"is-invalid";d=l.dirtyClass||"is-dirty";e=l.pristineClass||"is-pristine";g=l.fieldParentSelector||"div";f=l.disableSubmit||!1;z=l.onFormValidate||null;n=l.alertSubmit||!1;m=l.errorMessageClass||"error-message";var x=l.debounceTime||300;C=$debounce(this.validate.bind(this),x,!1);D=$debounce(this.validateField.bind(this),x,!1);h.setAttribute("novalidate","");f&&(u=h.querySelectorAll("input[type=submit]"),r(u));w=h.querySelectorAll("input[type=reset],input[type=button]");
r(w);var x=h.querySelectorAll('input:not([type="submit"]):not([type="reset"]),textarea,select'),F=this;$forEach(x,function(a){k("! initialize",a.name||a.id);a.isDirty=!1;$on(a,"blur",function(a){k("! ON blur",a.target.name||a.target.id);C()});$on(a,"input",function(b){k("! ON input",b.target.name||b.target.id);p=a.isDirty=!0;D(b.target.name||b.target.id)})});h.addEventListener("submit",function(b){k("! on submit");b.preventDefault();F.validate()?a&&h.setAttribute("action",a):(v&&$scrollIntoView(v),
n&&$alert("ATTENZIONE",n))})}var E=!1,s={},A={},B={},p=!1,q=!1,h=null,C=null,D=null,z=null,w=null,u=null;m=n=f=g=e=d=b=c=a=void 0;var v=null;l.prototype.addValidator=function(a,b){s.hasOwnProperty(a)||(s[a]=[]);s[a].push(b);k("- addValidator =",s);return this};l.prototype.validate=function(){k("! validate()...");var a=this._checkForm();this._reportForm(a);return q};l.prototype._checkForm=function(){var a=!0;v=null;for(var b in s){var c=this.checkField(b);!0!==c&&(a=!1);this.reportField(b,c)}z&&(k("-- calling onFormValidate..."),
a=z(h,a));k("-- _checkForm =",a);return a};l.prototype.checkField=function(a){k("- checkField()...",a);if(!s.hasOwnProperty(a))return console.warn("$form::checkField, does not exists: ",a),!0;for(var b=s[a],c=0;c<b.length;c++){var d=b[c];this.getFieldObject(a);var e=this.getFieldValue(a),d=d(e);if(!0!==d)return k("-- check failed terminating",d),d}return!0};l.prototype.getFieldObject=function(a){if(A.hasOwnProperty(a))return A[a];var b=h.querySelector('[name="'+a+'"],[id="'+a+'"]');return A[a]=b};
l.prototype.getFieldErrorMessageObject=function(a,b){if(B.hasOwnProperty(a))return B[a];if(b){var c=document.createElement("div");$addClasses(c,m);B[a]=c;b.appendChild(c);return c}return null};l.prototype.getFieldValue=function(a){var b=this.getFieldObject(a);if("radio"===b.type)return a=h.querySelector('[name="'+a+'"]:checked,[id="'+a+'"]:checked'),!a?null:a.value;if("checkbox"===b.type){a=h.querySelectorAll('[name="'+a+'"]:checked,[id="'+a+'"]:checked');if(0===a.length)return null;for(var b=[],
c=0;c<a.length;c++)b.push(a[c].value);return b}return b.value};l.prototype.reportField=function(a,l){var f=this.getFieldObject(a);if(f){var h=$closest(f,g);if(!0===l){$removeClass(h,b);$addClass(h,c);f.isValid=!0;var k=this.getFieldErrorMessageObject(a,null);k&&(k.innerHTML="")}else{$addClass(h,b);$removeClass(h,c);f.isValid=!1;if(k=this.getFieldErrorMessageObject(a,h))k.innerHTML=l;null===v&&(v=f)}f.hasOwnProperty("isDirty")&&(f.isDirty?($addClass(h,d),$removeClass(h,e)):($addClass(h,e),$removeClass(h,
d)))}else console.warn("$form::reportField, cannot find element for:",a)};l.prototype._reportForm=function(a){!0===a?(q=!0,$removeClass(h,b),$addClass(h,c),u&&t(u)):(q=!1,u&&r(u),$addClass(h,b),$removeClass(h,c));p&&w&&(t(w),w=null)};l.prototype.getFirstWrongElement=function(){return v};l.prototype.validateField=function(a){var b=this.checkField(a);this.reportField(a,b);return b};return l}();function $isFunction(a){return a&&"[object Function]"==={}.toString.call(a)}
var $dialog=function(){function a(a){a=a||{};var f=a.title||"",k=a.className||"",m=a.disableDismiss||!1,n=Array.isArray(a.buttons)?a.buttons:[],p=a.content||"",q=a.spinner||"",h=a.disableClose||!1;g=a.promiseCallback||null;t=!!a.allowScroll;b=$id(c);if(!b){d=document.createElement("div");$addClass(d,"dialog-window__inner");e=document.createElement("button");$addClass(e,"dialog-window__close");e.innerHTML="&times;";a=document.createElement("div");$addClass(a,"dialog-window");a.appendChild(e);a.appendChild(d);
b=document.createElement("div");b.setAttribute("id",c);$addClass(b,"dialog-backdrop");b.appendChild(a);document.body.appendChild(b);var r=this;e.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();r.hide()});b.addEventListener("click",function(a){a.target===a.currentTarget&&(a.preventDefault(),m||r.hide())})}b.className="dialog-backdrop";k&&$addClass(b,k);e.style.display=h?"none":"block";$empty(d);f&&(k=document.createElement("div"),$addClass(k,"dialog-window__title"),k.innerHTML=
f,d.appendChild(k));p&&(f=document.createElement("div"),$addClass(f,"dialog-window__content"),f.innerHTML=p,d.appendChild(f));q&&(p=document.createElement("div"),$addClass(p,"dialog-window__spinner"),$addClass(p,q),d.appendChild(p));if(0<n.length){q=document.createElement("div");$addClass(q,"dialog-window__buttons");d.appendChild(q);for(p=0;p<n.length;p++)h=n[p],$isString(h)&&(h={label:h}),f=h.label||"OK",k=h.className||(0==p?"btn--primary btn--large":"btn--secondary"),h=h.value||h.label,a=document.createElement("button"),
a.className="btn "+k,a.innerHTML=f,a.onclick=this.hide.bind(this,h),q.appendChild(a)}this.show()}var c="vanilla-dialog",b=null,d=null,e=null,g=null,f=!1,n="",m="",k="",r="",t=!1;a.prototype.hide=function(a){f?(f=!1,t||(document.body.style.position=m,document.body.style.width=k,window.scrollTo(0,n),document.documentElement.style.scrollBehavior=r),$removeClass(b,"open"),$empty(d),g&&$isFunction(g)&&g(a)):console.debug("$dialog: already closed")};a.prototype.show=function(){f?console.debug("$dialog: already open"):
(f=!0,$addClass(b,"open"),t||(n=window.scrollY||window.scrollTop||document.getElementsByTagName("html")[0].scrollTop,m=document.body.style.position,k=document.body.style.width,r=document.documentElement.style["scroll-behavior"],document.body.style.position="fixed",document.body.style.top="-"+n+"px",document.body.style.width="100%",document.documentElement.style.scrollBehavior="auto"))};a.prototype.then=function(a){g=a;return this};a.prototype.getStatus=function(a){return!!f};return a}();
function $backDrop(a){return new $dialog({content:a,spinner:"spinner2",disableDismiss:!0,disableClose:!0})}function $alert(a,c,b){return new $dialog({title:a,content:c,buttons:[b||"OK"],className:"dialog-backdrop--error"})}function $info(a,c,b){return new $dialog({title:a,content:c,buttons:[b||"OK"],className:"dialog-backdrop--info"})};var $sha256=function(){function a(a){try{a=""+a;a=a.toLowerCase();var d=(new TextEncoder).encode(a);crypto.subtle.digest("SHA-256",d).then(function(a){try{var b=Array.from(new Uint8Array(a)).map(function(a){return a.toString(16).padStart(2,"0")}).join("");c&&$isFunction(c)&&c(b)}catch(d){console.error("$sha256:",d)}})}catch(e){console.error("$sha256:",e)}}var c=null;a.prototype.then=function(a){c=a;return this};return a}();
